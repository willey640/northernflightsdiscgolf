<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Plumber Disc Golf 64</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: #7ec850;
      font-family: sans-serif;
    }
    canvas {
      display: block;
      image-rendering: pixelated;
    }
    #scoreDisplay {
      position: absolute;
      top: 10px;
      left: 10px;
      color: white;
      font-size: 20px;
      background: rgba(0, 0, 0, 0.5);
      padding: 5px 10px;
      border-radius: 10px;
    }
  </style>
</head>
<body>
  <div id="scoreDisplay">Score: 0</div>
  <canvas id="gameCanvas"></canvas>
  <audio id="midiMusic" autoplay loop>
    <source src="https://archive.org/download/N64-MIDI/mario64.mid" type="audio/midi">
  </audio>
  <audio id="missSound">
    <source src="https://freesound.org/data/previews/341/341695_6266115-lq.mp3" type="audio/mpeg">
  </audio>
  <audio id="ghostMoan">
    <source src="https://freesound.org/data/previews/446/446207_9034500-lq.mp3" type="audio/mpeg">
  </audio>
  <audio id="gooseHonk">
    <source src="https://freesound.org/data/previews/220/220173_4102624-lq.mp3" type="audio/mpeg">
  </audio>
  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    const scoreDisplay = document.getElementById("scoreDisplay");
    const missSound = document.getElementById("missSound");
    const ghostMoan = document.getElementById("ghostMoan");
    const gooseHonk = document.getElementById("gooseHonk");

    let width = window.innerWidth;
    let height = window.innerHeight;
    canvas.width = width;
    canvas.height = height;

    let score = 0;

    let plumber = {
      x: width / 2,
      y: height - 100,
      vx: 0,
      vy: 0,
      throwing: false,
      discX: 0,
      discY: 0,
      discVX: 0,
      discVY: 0,
    };

    let goose = {
      x: Math.random() * (width - 200) + 100,
      y: height - 150,
      radius: 20,
      direction: 1
    };

    let frogComments = [
      "Nice arc, if you're aiming for a tree.",
      "Bold choice of velocity. Let's see how that works out.",
      "You call *that* a throw? Ribbit.",
      "Did you mean to bounce it off the goose?",
      "Frog-tastic effort... not."
    ];

    const basket = {
      x: Math.random() * (width - 200) + 100,
      y: height - 120,
      radius: 20,
    };

    const ghostPipe = {
      x: Math.random() * (width - 200) + 100,
      y: height - 60,
      radius: 25,
    };

    const treePositions = Array.from({ length: 5 }, () => ({
      x: Math.random() * (width - 60) + 30,
      trunkHeight: 40
    }));

    let hatUnlocked = false;
    let frogTimeout = null;

    function drawTrees() {
      for (const tree of treePositions) {
        ctx.fillStyle = "#8B4513";
        ctx.fillRect(tree.x, height - 60, 10, tree.trunkHeight);
        ctx.fillStyle = "#228B22";
        ctx.beginPath();
        ctx.moveTo(tree.x - 20, height - 60);
        ctx.lineTo(tree.x + 30, height - 60);
        ctx.lineTo(tree.x + 5, height - 100);
        ctx.closePath();
        ctx.fill();
      }
    }

    function drawGoose() {
      ctx.fillStyle = "white";
      ctx.beginPath();
      ctx.arc(goose.x, goose.y, goose.radius, 0, Math.PI * 2);
      ctx.fill();
      ctx.fillStyle = "orange";
      ctx.fillRect(goose.x - 5, goose.y + 15, 10, 5);
      ctx.fillStyle = "black";
      ctx.fillText("HONK", goose.x - 15, goose.y - 25);
    }

    function drawFrogComment() {
      if (frogTimeout) return;
      const comment = frogComments[Math.floor(Math.random() * frogComments.length)];
      ctx.fillStyle = "#556b2f";
      ctx.font = "bold 16px sans-serif";
      ctx.fillText("🐸 " + comment, 20, height - 40);
      frogTimeout = setTimeout(() => { frogTimeout = null; }, 2000);
    }

    function updateGoose() {
      goose.x += 1.5 * goose.direction;
      if (goose.x > width - 100 || goose.x < 100) {
        goose.direction *= -1;
      }

      if (plumber.throwing) {
        const dx = plumber.discX - goose.x;
        const dy = plumber.discY - goose.y;
        const dist = Math.sqrt(dx * dx + dy * dy);
        if (dist < goose.radius + 10) {
          plumber.throwing = false;
          gooseHonk.play();
          alert("🪿 The goose stole your disc. Get honked.");
        }
      }
    }

    function gameLoop() {
      ctx.clearRect(0, 0, width, height);
      drawTrees();
      drawGoose();
      updateGoose();

      if (plumber.throwing) {
        drawFrogComment();
      }

      requestAnimationFrame(gameLoop);
    }

    gameLoop();
  </script>
</body>
</html>
